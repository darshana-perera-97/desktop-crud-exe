<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desktop CRUD App</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="container">
        <header class="header">
            <h1>Data Collector App</h1>
            <p class="greeting" id="greeting"></p>
        </header>

        <main class="main-content">
            <!-- Landing Page with Cards -->
            <div id="landing-page" class="landing-page">
                <div class="cards-grid">
                    <div class="card" onclick="navigateToSection('add-user')">
                        <div class="card-icon">üë§</div>
                        <h3 class="card-title">Add User</h3>
                        <p class="card-description">Add a new user to the system</p>
                    </div>
                    <div class="card" onclick="navigateToSection('view-users')">
                        <div class="card-icon">üìã</div>
                        <h3 class="card-title">View Users</h3>
                        <p class="card-description">View and manage all users</p>
                    </div>
                    <div class="card" onclick="navigateToSection('communities')">
                        <div class="card-icon">üë•</div>
                        <h3 class="card-title">Communities</h3>
                        <p class="card-description">Manage communities</p>
                    </div>
                    <div class="card" onclick="navigateToSection('settings')">
                        <div class="card-icon">‚öôÔ∏è</div>
                        <h3 class="card-title">Settings</h3>
                        <p class="card-description">Application settings</p>
                    </div>
                </div>
            </div>

            <!-- Data Directory Status -->
            <div class="content-section" id="directory-status" style="display: none;">
                <h2>üìÅ Data Directory</h2>
                <div class="path-display" id="current-directory"></div>
            </div>

            <!-- CRUD Operations -->
            <div class="content-section" id="add-user-section" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h2 style="margin: 0;">üìù User Registration</h2>
                    <button class="btn btn-outline" onclick="navigateToSection('home')"
                        style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;">‚Üê
                        Back to Home</button>
                </div>

                <!-- Add New Record Form -->
                <div class="form-section">
                    <h3>User Information Form</h3>
                    <form id="add-form" class="crud-form">
                        <div class="form-group">
                            <label for="name">i√ØmQ¬æK ku</label>
                            <input type="text" id="name" name="name" placeholder="ku" required>
                        </div>

                        <div class="form-group">
                            <label for="nic">cd' ye' wxlh</label>
                            <input type="text" id="nic" name="nic" placeholder="cd' ye' wxlh" required>
                        </div>

                        <div class="form-group">
                            <label for="mobile1">cx.u √ørl;k wxl 01</label>
                            <input type="tel" id="mobile1" name="mobile1"
                                placeholder="√ørl;k wxl 01 we;=,;a lrkak ^7)))))))))&">
                        </div>

                        <div class="form-group">
                            <label for="whatsapp">j√úia-wema wxlh</label>
                            <input type="tel" id="whatsapp" name="whatsapp" placeholder="j√úia-wema wxlh ^7)))))))))&">
                        </div>

                        <div class="form-group">
                            <label for="mobile2">cx.u √ørl;k wxl 02 ^√∫l,am&</label>
                            <input type="tel" id="mobile2" name="mobile2"
                                placeholder="√ørl;k wxl 02 we;=,;a lrkak ^7)))))))))&">
                        </div>

                        <div class="form-group">
                            <label for="homeNumber">ia:djr √ørl;k wxl ^√∫l,am&</label>
                            <input type="tel" id="homeNumber" name="homeNumber"
                                placeholder="ia:djr √ørl;k wxlh we;=,;a lrkak">
                        </div>

                        <div class="form-group">
                            <label for="address">,smskh</label>
                            <textarea id="address" name="address" rows="3" placeholder=",smskh" required></textarea>
                        </div>

                        <div class="form-group">
                            <label for="dob">Wmka √àkh</label>
                            <input type="date" id="dob" name="dob" required placeholder="Wmka √àkh">
                        </div>

                        <div class="form-group">
                            <label for="politicalPartyId">mlaI idud√∞l wxlh</label>
                            <input type="text" id="politicalPartyId" name="politicalPartyId" pattern="\d{6}"
                                title="Membership number must be 6 digits" placeholder="Unique ID" required>
                        </div>

                        <div class="form-group">
                            <label for="region">wdikh</label>
                            <select id="region" name="region" required>
                                <option value="">wdikh f;darkak</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="agaDivision">m%dfoaYSh f,al√Ø ld¬æhd,h</label>
                            <select id="agaDivision" name="agaDivision" required>
                                <option value="">m%dfoaYSh f,al√Ø ld¬æhd,h f;darkak</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="gsDivision">.%dufiajd jiu</label>
                            <select id="gsDivision" name="gsDivision" required>
                                <option value="">.%dufiajd jiu f;darkak</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="poolingBooth">Pkao uOHia:dkh</label>
                            <select id="poolingBooth" name="poolingBooth" required>
                                <option value="">Pkao uOHia:dkh wxlh f;darkak</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="priority">m%uqL;dj</label>
                            <select id="priority" name="priority" required>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5" selected>5</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="communities">idud√∞l;ajhka</label>
                            <div class="communities-container">
                                <input type="text" id="community-input" list="community-suggestions"
                                    placeholder="idud√∞l;ajhka">
                                <datalist id="community-suggestions"></datalist>
                                <div id="selected-communities" class="selected-communities"></div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="connectivity">fjk;a √∫ia;r</label>
                            <input type="text" id="connectivity" name="connectivity"
                                placeholder="idu√∞lhdf.a fjk;a √∫ia;r">
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Submit</button>
                            <button type="button" class="btn btn-secondary" onclick="clearForm()">Clear</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- View Users Section -->
            <div id="view-users-section" class="content-section" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <button class="btn btn-outline" onclick="navigateToSection('home')"
                            style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;">‚Üê
                            Back to Home</button>
                        <h2 style="margin: 0;">üìã View Users</h2>
                    </div>
                    <button class="btn btn-outline" onclick="navigateToSection('add-user')"
                        style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;">+
                        Add New User</button>
                </div>
                
                <!-- Filters Section -->
                <div class="filters-section" style="margin-bottom: 20px; padding: 20px; background: var(--card-bg, #fff); border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                        <div class="form-group" style="margin: 0;">
                            <label for="filter-name" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif; display: block; margin-bottom: 5px; font-size: 0.9rem; color: #666;">Name</label>
                            <input type="text" id="filter-name" name="name" placeholder="Name" 
                                style="width: 100%; padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px; font-size: 0.9rem; font-family: 'FM Malithi', 'Malithi Web', 'Iskoola Pota', 'Noto Sans Sinhala', sans-serif;">
                        </div>
                        <div class="form-group" style="margin: 0;">
                            <label for="filter-nic" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif; display: block; margin-bottom: 5px; font-size: 0.9rem; color: #666;">NIC Number</label>
                            <input type="text" id="filter-nic" name="nic" placeholder="NIC Number" 
                                style="width: 100%; padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px; font-size: 0.9rem; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;">
                        </div>
                        <div class="form-group" style="margin: 0;">
                            <label for="filter-gsDivision" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif; display: block; margin-bottom: 5px; font-size: 0.9rem; color: #666;">GS Division</label>
                            <select id="filter-gsDivision" name="gsDivision" 
                                style="width: 100%; padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px; font-size: 0.9rem; font-family: 'FM Malithi', 'Malithi Web', 'Iskoola Pota', 'Noto Sans Sinhala', sans-serif;">
                                <option value="">-- Select GS Division --</option>
                            </select>
                        </div>
                        <div class="form-group" style="margin: 0;">
                            <label for="filter-poolingBooth" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif; display: block; margin-bottom: 5px; font-size: 0.9rem; color: #666;">Pooling Booth</label>
                            <select id="filter-poolingBooth" name="poolingBooth" 
                                style="width: 100%; padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px; font-size: 0.9rem; font-family: 'FM Malithi', 'Malithi Web', 'Iskoola Pota', 'Noto Sans Sinhala', sans-serif;">
                                <option value="">-- Select Pooling Booth --</option>
                            </select>
                        </div>
                        <div class="form-group" style="margin: 0;">
                            <label for="filter-priority" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif; display: block; margin-bottom: 5px; font-size: 0.9rem; color: #666;">Priority</label>
                            <select id="filter-priority" name="priority" 
                                style="width: 100%; padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px; font-size: 0.9rem; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;">
                                <option value="">-- Select Priority --</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                            </select>
                        </div>
                    </div>
                    <div style="margin-top: 15px; display: flex; justify-content: flex-start; gap: 10px;">
                        <button type="button" id="view-action-btn-1" class="btn btn-outline" onclick="openPdfFieldSelection()" 
                            style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;">
                            Download PDF
                        </button>
                        <button type="button" id="view-action-btn-2" class="btn btn-outline" onclick="downloadAddressListPdf()" 
                            style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;">
                            Download Address List
                        </button>
                        <button type="button" id="view-action-btn-3" class="btn btn-outline" onclick="handleViewAction3()" 
                            style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;">
                            Action 3
                        </button>
                        <button type="button" class="btn btn-outline" onclick="clearFilters()" 
                            style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;">
                            Clear Filters
                        </button>
                    </div>
                </div>
                
                <div style="overflow-x: auto;">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>NIC</th>
                                <th>Party ID</th>
                                <th>Mobile 1</th>
                                <th>Region</th>
                                <th>AGA Division</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="view-records-list">
                            <!-- Records will be populated here -->
                        </tbody>
                    </table>
                </div>
                
                <!-- Pagination Controls -->
                <div id="pagination-controls" class="pagination-container">
                    <div class="pagination-info-section">
                        <span id="pagination-info" class="pagination-info">Showing 0 - 0 of 0 records</span>
                    </div>
                    <div class="pagination-navigation">
                        <button id="pagination-prev" class="pagination-btn pagination-nav-btn" onclick="goToPreviousPage()">
                            <span>‚Üê</span> Previous
                        </button>
                        <div id="pagination-pages" class="pagination-pages">
                            <!-- Page numbers will be populated here -->
                        </div>
                        <button id="pagination-next" class="pagination-btn pagination-nav-btn" onclick="goToNextPage()">
                            Next <span>‚Üí</span>
                        </button>
                    </div>
                    <div class="pagination-per-page">
                        <label for="records-per-page" class="pagination-label">Records per page:</label>
                        <select id="records-per-page" class="pagination-select" onchange="changeRecordsPerPage()">
                            <option value="10">10</option>
                            <option value="25" selected>25</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- View User Details Section -->
            <div id="view-user-details-section" class="content-section" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <button class="btn btn-outline" onclick="navigateToSection('view-users')"
                            style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;">‚Üê
                            Back to List</button>
                        <h2 style="margin: 0;">üë§ User Details</h2>
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <button id="edit-from-view-btn" class="btn btn-outline" onclick="toggleEditMode()"
                            style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;">‚úèÔ∏è Edit</button>
                        <button id="save-view-btn" class="btn btn-primary" onclick="saveFromViewPage()" style="display: none; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;">üíæ Save</button>
                        <button id="cancel-view-btn" class="btn btn-secondary" onclick="cancelEditMode()" style="display: none; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;">Cancel</button>
                    </div>
                </div>
                <form id="view-user-edit-form" onsubmit="saveFromViewPage(); return false;">
                    <div id="view-user-details-page-content" class="view-user-details-page">
                        <!-- User details will be populated here -->
                    </div>
                </form>
            </div>

            <!-- Communities Section -->
            <div id="communities-section" class="content-section" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h2 style="margin: 0;">üë• Communities</h2>
                    <div style="display: flex; gap: 10px;">
                        <button class="btn btn-primary" onclick="openAddCommunityModal()"
                            style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;">+
                            Add Community</button>
                        <button class="btn btn-outline" onclick="navigateToSection('home')"
                            style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;">‚Üê
                            Back to Home</button>
                    </div>
                </div>
                <div id="communities-list-container">
                    <!-- Communities will be displayed here -->
                </div>
            </div>

            <!-- Settings Section -->
            <div id="settings-section" class="content-section" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
                    <h2
                        style="margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;">
                        ‚öôÔ∏è Settings</h2>
                    <button class="btn btn-outline" onclick="navigateToSection('home')"
                        style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;">‚Üê
                        Back to Home</button>
                </div>

                <div id="settings-status-message"
                    style="display: none; padding: 12px; border-radius: 6px; margin-bottom: 20px;"></div>

                <div class="form-section">
                    <h3
                        style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;">
                        Data Storage Location</h3>
                    <p
                        style="color: #666; margin-bottom: 20px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;">
                        Choose where your application data will be stored. This includes all your records and settings.
                    </p>

                    <div class="form-group">
                        <label for="settings-data-directory"
                            style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;">Data
                            Directory Path:</label>
                        <input type="text" id="settings-data-directory" readonly
                            style="margin-bottom: 10px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;">
                        <div class="path-display" id="settings-path-display"></div>
                    </div>

                    <div class="form-actions" style="margin-top: 20px;">
                        <button type="button" class="btn btn-outline" onclick="selectNewDirectory()">Change
                            Location</button>
                        <button type="button" class="btn btn-primary" onclick="saveAppSettings()">Save Settings</button>
                    </div>
                </div>

                <div class="form-section" style="margin-top: 30px;">
                    <h3
                        style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;">
                        Appearance</h3>
                    <p
                        style="color: #666; margin-bottom: 20px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;">
                        Customize the appearance of the application.
                    </p>

                    <div class="form-actions">
                        <button type="button" class="btn btn-outline" onclick="toggleTheme()">üåô Toggle Theme</button>
                    </div>
                </div>

                <div class="form-section" style="margin-top: 30px;">
                    <h3
                        style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;">
                        Application Information</h3>
                    <p
                        style="color: #666; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;">
                        <strong>Version:</strong> 1.0.0<br><br>
                        This application stores all data locally in JSON files within the selected directory.
                        Your data remains private and is not sent to any external servers.
                    </p>
                </div>
            </div>

            <!-- Statistics -->
            <div class="content-section" id="statistics-section" style="display: none;">
                <h2>üìä Statistics</h2>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-number" id="total-records">0</div>
                        <div class="stat-label">Total Records</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="today-records">0</div>
                        <div class="stat-label">Added Today</div>
                    </div>
                </div>
            </div>
        </main>

        <footer class="footer">
            <p id="copyright-text">@ <span id="current-year"></span> SJB Chithral Fernando</p>
        </footer>
    </div>

    <!-- Add Community Modal -->
    <div id="add-community-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Community</h3>
                <button class="close-btn" onclick="closeAddCommunityModal()">&times;</button>
            </div>
            <form id="add-community-form" class="crud-form">
                <div style="padding: 20px;">
                    <div class="form-group">
                        <label for="community-name"
                            style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;">Community
                            Name</label>
                        <input type="text" id="community-name" style="text-align: start;" name="communityName" required
                            placeholder="i√±;sfha ku">
                    </div>

                    <div class="form-group">
                        <label for="community-region"
                            style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;">AG
                            Region</label>
                        <select id="community-region" name="region" required>
                            <option value="">wdikh f;darkak</option>
                        </select>

                    </div>

                    <div class="form-group">
                        <label for="community-gsDivision"
                            style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;">GS
                            Division</label>
                        <select id="community-gsDivision" name="gsDivision" required>
                            <option value="">.%dufiajd jiu f;darkak</option>
                        </select>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">Save Community</button>
                        <button type="button" class="btn btn-secondary"
                            onclick="closeAddCommunityModal()">Cancel</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- View Details Modal -->
    <div id="view-details-modal" class="modal" style="display: none;">
        <div class="modal-content view-details-modal-content">
            <div class="modal-header">
                <h3>üë§ User Details</h3>
                <button class="close-btn" onclick="closeViewDetailsModal()">&times;</button>
            </div>
            <div id="view-details-content" class="view-details-content">
                <!-- Details will be populated here -->
            </div>
        </div>
    </div>

    <!-- Edit Modal -->
    <div id="edit-modal" class="modal" style="display: none;">
        <div class="modal-content edit-modal-content">
            <div class="modal-header">
                <h3>‚úèÔ∏è Edit User Record</h3>
                <button class="close-btn" onclick="closeEditModal()">&times;</button>
            </div>
            <form id="edit-form" class="crud-form">
                <input type="hidden" id="edit-id">

                <div class="form-group">
                    <label for="edit-name">i√ØmQ¬æK ku</label>
                    <input type="text" id="edit-name" name="name" placeholder="ku" required>
                </div>

                <div class="form-group">
                    <label for="edit-nic">cd' ye' wxlh</label>
                    <input type="text" id="edit-nic" name="nic" placeholder="NIC" required>
                </div>

                <div class="form-group">
                    <label for="edit-mobile1">cx.u √ørl;k wxl 01</label>
                    <input type="tel" id="edit-mobile1" name="mobile1"
                        placeholder="√ørl;k wxl 01 we;=,;a lrkak ^7)))))))))&">
                </div>

                <div class="form-group">
                    <label for="edit-whatsapp">j√úia-wema wxlh</label>
                    <input type="tel" id="edit-whatsapp" name="whatsapp" placeholder="WhatsApp contact number">
                </div>

                <div class="form-group">
                    <label for="edit-mobile2">cx.u √ørl;k wxl 02 ^√∫l,am&</label>
                    <input type="tel" id="edit-mobile2" name="mobile2"
                        placeholder="√ørl;k wxl 02 we;=,;a lrkak ^7)))))))))&">
                </div>

                <div class="form-group">
                    <label for="edit-homeNumber">ia:djr √ørl;k wxl ^√∫l,am&</label>
                    <input type="tel" id="edit-homeNumber" name="homeNumber"
                        placeholder="ia:djr √ørl;k wxlh we;=,;a lrkak">
                </div>

                <div class="form-group">
                    <label for="edit-address">,smskh</label>
                    <textarea id="edit-address" name="address" rows="3" placeholder=",smskh" required></textarea>
                </div>

                <div class="form-group">
                    <label for="edit-dob">Wmka √àkh</label>
                    <input type="date" id="edit-dob" name="dob" required>
                </div>

                <div class="form-group">
                    <label for="edit-politicalPartyId">mlaI idud√∞l wxlh</label>
                    <input type="text" id="edit-politicalPartyId" name="politicalPartyId" pattern="\d{6}"
                        title="Membership number must be 6 digits" placeholder="Unique ID" required>
                </div>

                <div class="form-group">
                    <label for="edit-region">wdikh</label>
                    <select id="edit-region" name="region" required>
                        <option value="">wdikh f;darkak</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="edit-agaDivision">m%dfoaYSh f,al√Ø ld¬æhd,h</label>
                    <select id="edit-agaDivision" name="agaDivision" required>
                        <option value="">m%dfoaYSh f,al√Ø ld¬æhd,h f;darkak</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="edit-gsDivision">.%dufiajd jiu</label>
                    <select id="edit-gsDivision" name="gsDivision" required>
                        <option value="">.%dufiajd jiu f;darkak</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="edit-poolingBooth">Pkao uOHia:dkh</label>
                    <select id="edit-poolingBooth" name="poolingBooth" required>
                        <option value="">Pkao uOHia:dkh wxlh f;darkak</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="edit-priority">m%uqL;dj</label>
                    <select id="edit-priority" name="priority" required>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="edit-communities">idud√∞l;ajhka</label>
                    <div class="communities-container">
                        <input type="text" id="edit-community-input" list="edit-community-suggestions" placeholder="idud√∞l;ajhka">
                        <datalist id="edit-community-suggestions"></datalist>
                        <div id="edit-selected-communities" class="selected-communities"></div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="edit-connectivity">fjk;a √∫ia;r</label>
                    <input type="text" id="edit-connectivity" name="connectivity" placeholder="idu√∞lhdf.a fjk;a √∫ia;r">
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Update Record</button>
                    <button type="button" class="btn btn-secondary" onclick="closeEditModal()">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- PDF Field Selection Modal -->
    <div id="pdf-field-selection-modal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h3>Select Fields for PDF Export</h3>
                <button class="close-btn" onclick="closePdfFieldSelection()">&times;</button>
            </div>
            <div class="modal-body" style="padding: 25px;">
                <p style="margin-bottom: 20px; color: #666; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;">
                    Select the fields you want to include in the PDF. The PDF will contain only the filtered data currently displayed.
                </p>
                <div id="pdf-field-checkboxes" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; max-height: 400px; overflow-y: auto; padding: 10px;">
                    <!-- Checkboxes will be populated here -->
                </div>
                <div style="margin-top: 20px; display: flex; gap: 10px; justify-content: flex-end;">
                    <button type="button" class="btn btn-secondary" onclick="closePdfFieldSelection()">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="generatePdf()">Generate PDF</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="renderer.js"></script>
</body>

</html>